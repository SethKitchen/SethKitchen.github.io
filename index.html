<!DOCTYPE HTML>
<html>
	<head>
		<title>Quiz Builder</title>
    <meta charset="utf-8"/>
		<link rel="stylesheet" type="text/css" href="Latex/mathquill.css">
    	<link rel="stylesheet" href="Latex/NewMathQuill/mathquill.css"/>
    	<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js'></script>
   	    <script src="Latex/NewMathQuill/mathquill.js"></script>
	</head>
	<body>
		<body style="background-color:lightgrey;">
    <!-- CHAT MARKUP -->
    <div id="scroller" style="color:black" class="scroll-pane">
      <header>
        <p>Show that if the transformation</p>
        <span id="problemStatement1">T: \R^{(2x1)}\rightarrow\R^{(2x1)}</span> 
        <p>is defined by the formula</p> 
        <span id="problemStatement2">T(\binom{x_1}{x_2})=\binom{5x_1+2x_2}{3x_1-x_2}</span>
        <p>then T is a linear transformation.</p> 
      </header>
      <hr />
      <hr />
        <div id="steps">

        </div>
        <input type="button" value="Clear Steps" id="deleteBtn" onclick="Clear()" />
       <p><span id="mathTextBox" style="color:black" class="mathquill-editor"></span></p>
    </div>
      
    <script type="text/javascript" src="Latex/mathquill.js"></script>

     <button onclick="Add()">Add Step</button> 
   </div>
    <!-- CHAT JAVACRIPT -->
    <script>
        var MQ=MathQuill.getInterface(2);
        MQ.StaticMath(document.getElementById("problemStatement1"));
        MQ.StaticMath(document.getElementById("problemStatement2"));

        function Clear()
        {
          var toDeleteFrom=document.getElementById("steps");
            while (toDeleteFrom.firstChild) {
              toDeleteFrom.firstChild.innerHtml="";
              toDeleteFrom.removeChild(toDeleteFrom.firstChild);
            }
        }
        function Add()
        {
           var message = $(document.getElementById("mathTextBox")).mathquill('latex').split(':').join(' ');
           console.log("message"+message);
           var stepNumberPara=document.createElement("p");
           var stepNumberNode=document.createTextNode("Step )");
           stepNumberPara.appendChild(stepNumberNode);

           var paraMessage = document.createElement("span");
           var nodeMessage = document.createTextNode(message);
           paraMessage.appendChild(nodeMessage);
           paraMessage.className="message";


           var element = document.getElementById("steps");
           element.appendChild(stepNumberPara);
           element.appendChild(paraMessage);
           var line=document.createElement("HR");
           element.appendChild(line);
 
                //messageList[0].scrollTop = messageList[0].scrollHeight;
                var list=document.getElementsByClassName("message");
                for (var i = 0; i < list.length; i++) {
                    MQ.StaticMath(list[i]); //second console output
                }

           $(document.getElementById("mathTextBox")).mathquill('latex','');

           while ($('.mathquill-editor').children().length > 2)
              $('.mathquill-editor').children()[2].remove();
           $('.mathquill-editor').addClass('empty');
           message="";
        }
    </script>

		
	</body>
</html>